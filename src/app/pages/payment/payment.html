<form nz-form class="filter">
  <div nz-row [nzGutter]="12" nzJustify="space-between" nzAlign="middle">
    <div nz-col nzFlex="1">
      <div nz-row [nzGutter]="12">
        <div nz-col nzFlex="1">
          <input nz-input placeholder="T√¨m m√£, t√™n c√°n b·ªô..." [(ngModel)]="searchInput"
            [ngModelOptions]="{standalone: true}">
        </div>
        <div nz-col>
          <button nz-button nzType="primary" type="button" (click)="onSearch()">T√¨m ki·∫øm</button>
        </div>
      </div>
    </div>
  </div>
</form>

<nz-table [nzData]="filteredData" nzBordered>
  <thead>
    <tr>
      <th>M√£</th>
      <th>H·ªç t√™n</th>
      <th>Khoa</th>
      <th>H√¨nh th·ª©c thi</th> <!-- üÜï m·ªõi th√™m -->
      <th>T·ªïng ti·ªÅn</th>
      <th>H√†nh ƒë·ªông</th>
    </tr>
  </thead>

  <tbody>
    @for (t of filteredData; track t.id) {
    <tr>
      <td>{{t.code}}</td>
      <td>{{t.fullName}}</td>
      <td>{{t.dept}}</td>

      <!-- üÜï HI·ªÇN TH·ªä H√åNH TH·ª®C -->
      <td>
        <span *ngIf="examForm.type === 'viet'">Thi vi·∫øt</span>
        <span *ngIf="examForm.type === 'khac'">H√¨nh th·ª©c kh√°c</span>
      </td>

      <!-- T·ªîNG TI·ªÄN -->
      <td>{{ totalAmount | number:'1.0-0' }} VND</td>

      <td>
        <button nz-button nzType="primary" type="button" (click)="isVisible = true">
          T√≠nh ti·ªÅn
        </button>
      </td>
    </tr>
    }
  </tbody>
</nz-table>

<nz-modal [(nzVisible)]="isVisible" nzTitle="T√≠nh ti·ªÅn coi thi"
  (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">

  <ng-container *nzModalContent>
    <form nz-form>

      <nz-form-item>
        <nz-form-label [nzSpan]="6">S·ªë ca</nz-form-label>
        <nz-form-control [nzSpan]="16">
          <nz-input-number [(ngModel)]="examForm.sessions" [ngModelOptions]="{standalone: true}" [nzMin]="1"></nz-input-number>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSpan]="6">H√¨nh th·ª©c</nz-form-label>
        <nz-form-control [nzSpan]="16">
          <nz-select [(ngModel)]="examForm.type"
            [ngModelOptions]="{standalone: true}"
            nzPlaceHolder="Ch·ªçn h√¨nh th·ª©c thi">

            <nz-option nzValue="viet" nzLabel="Thi vi·∫øt"></nz-option>
            <nz-option nzValue="khac" nzLabel="H√¨nh th·ª©c kh√°c"></nz-option>

          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item *ngIf="examForm.type === 'khac'">
        <nz-form-label [nzSpan]="6">S·ªë sinh vi√™n</nz-form-label>
        <nz-form-control [nzSpan]="16">
          <nz-input-number [(ngModel)]="examForm.studentCount"
            [ngModelOptions]="{standalone: true}"
            [nzMin]="1"></nz-input-number>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSpan]="6">T·ªïng ti·ªÅn</nz-form-label>
        <nz-form-control [nzSpan]="16">
          <input nz-input readonly [value]="totalAmount | number:'1.0-0'">
        </nz-form-control>
      </nz-form-item>

    </form>
  </ng-container>

</nz-modal>

<div class="rules">
  <h3>Quy t·∫Øc t√≠nh ti·ªÅn (demo)</h3>

  <div>ƒê∆°n gi√° (VNƒê/ca):
    <nz-input-number [ngModel]="baseRate()" 
      (ngModelChange)="baseRate.set($event)" [nzStep]="5000"></nz-input-number>
  </div>

  <div>Cu·ªëi tu·∫ßn (+VNƒê):
    <nz-input-number [ngModel]="weekendBonus()" 
      (ngModelChange)="weekendBonus.set($event)" [nzStep]="5000"></nz-input-number>
  </div>

  <div>V∆∞·ª£t 90' (+VNƒê/30'):
    <nz-input-number [ngModel]="overtimePer30Min()" 
      (ngModelChange)="overtimePer30Min.set($event)" [nzStep]="5000"></nz-input-number>
  </div>
</div>
